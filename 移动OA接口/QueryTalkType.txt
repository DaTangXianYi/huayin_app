*** Settings ***
Library           RequestsLibrary
Library           Collections

*** Test Cases ***
任务查询
    Create Session    api    http://192.168.25.16:8099
    ${accountId}    Set Variable    ff80808164d0c86d0164dfcf38630017    #用户ID
    ${title}    Set Variable    \    #标题名称：用于按名称模糊查询
    ${state}    Set Variable    1    #0表示待审核的，1表示查询所有的
    ${pagesize}    Set Variable    10    #分页大小
    ${page}    Set Variable    1    #分页索引 0表示第一页
    ${addr}    Get Request    api    hyoa/camel/mapi/hyoaMobileService/QueryTalkType?accountId=${accountId}&page=${page}&pagesize=${pagesize}&state=${state}
    Should Be Equal As Integers    ${addr.status_code}    200
    log    ${addr.content}
    ${responsedata}    to json    ${addr.content}
    ${keys}    Get Dictionary Keys    ${responsedata}
    ${items}    Get Dictionary Keys    ${responsedata}
    ${values}    Get Dictionary Keys    ${responsedata}
    ${flag}    get from dictionary    ${responsedata}    flag
    ${exception}    get from dictionary    ${responsedata}    exception
    ${statusCode}    get from dictionary    ${responsedata}    statusCode
    Run Keyword If    ${addr.status_code}==200 and '${flag}'=='success' and '${exception}'=='' and ${statusCode}==0    log    任务查询成功
    ...    ELSE IF    ${addr.status_code}!=200    log    任务查询失败
    ...    ELSE IF    '${flag}'=='flase'    log    任务查询失败
    ...    ELSE IF    '${exception}'!=''    log    任务查询失败
    ...    ELSE    ${statusCode}!=0    log    任务查询失败
    ${currpage}    get from dictionary    ${responsedata}    currpage
    log    ${currpage}
    ${totalpages}    get from dictionary    ${responsedata}    totalpages
    log    ${currpage}
    ${totalrecords}    get from dictionary    ${responsedata}    totalrecords
    log    ${totalrecords}
    ${rows}    get from dictionary    ${responsedata}    rows
    log    ${rows}
