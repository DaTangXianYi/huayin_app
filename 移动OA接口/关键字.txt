*** Settings ***
Library           Collections
Library           RequestsLibrary

*** Variables ***

*** Keywords ***
创建session
    create session    api    ${host}
    get request    api    ${addr}

判断请求响应是否为200，服务器成功返回网页
    Should Be Equal As Strings    ${addr.status_code}    ${number}

打印接口返回值
    log    ${addr.content}

使用to json将string转换为json串
    ${responsedate}    to json    ${addr.content}
    ${keys}    Get Dictionary Keys    ${responsedate}
    ${items}    Get Dictionary items    ${responsedate}
    ${values}    Get Dictionary values    ${responsedate}
    ${currpage}    get from dictionary    ${responsedate}    currpage
    ${exception}    get from dictionary    ${responsedate}    exception
    ${flag}    get from dictionary    ${responsedate}    flag
    ${rows}    get from dictionary    ${responsedate}    rows
    ${sidx}    get from dictionary    ${responsedate}    sidx
    ${sord}    get from dictionary    ${responsedate}    sord
    ${statusCode}    get from dictionary    ${responsedate}    statusCode
    ${totalpages}    get from dictionary    ${responsedate}    totalpages
    ${totalrecords}    get from dictionary    ${responsedate}    totalrecords

查询成功判断
    Run Keyword if    '${flag}'=='success'    log    查询成功判断
    Run Keyword if    ${statusCode}==0    log    查询成功判断

删除session
    Delete All Sessions
