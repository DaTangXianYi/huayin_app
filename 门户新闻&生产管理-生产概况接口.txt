*** Settings ***
Library           Selenium2Library    timeout=100
Library           requests
Library           RequestsLibrary
Library           DatabaseLibrary
Library           Collections
Library           demjson

*** Test Cases ***
获取图片新闻列表getNews
    Create Session    api    http://192.168.20.186:9000
    ${addr}    get request    api    yth-mh/news/getNews
    Should Be Equal As Strings    ${addr.status_code}    200    #判断请求响应是否为200，服务器成功返回网页
    log    ${addr.content}    #打印接口返回值
    ${responsedate}    to json    ${addr.content}    #使用to json将string转换为json串
    ${keys}    Get Dictionary Keys    ${responsedate}
    ${dict0}    get from list    ${responsedate}    0
    ${id}    get from dictionary    ${dict0}    id
    ${classid}    get from dictionary    ${dict0}    classid
    ${ttid}    get from dictionary    ${dict0}    ttid
    ${onclick}    get from dictionary    ${dict0}    onclick
    ${plnum}    get from dictionary    ${dict0}    plnum
    ${totaldown}    get from dictionary    ${dict0}    totaldown
    ${newspath}    get from dictionary    ${dict0}    newspath
    ${filename}    get from dictionary    ${dict0}    filename
    ${userid}    get from dictionary    ${dict0}    userid
    ${username}    get from dictionary    ${dict0}    username
    ${firsttitle}    get from dictionary    ${dict0}    firsttitle
    ${isgood}    get from dictionary    ${dict0}    isgood
    ${ispic}    get from dictionary    ${dict0}    ispic
    ${istop}    get from dictionary    ${dict0}    istop
    ${isqf}    get from dictionary    ${dict0}    isqf
    ${ismember}    get from dictionary    ${dict0}    ismember
    ${isurl}    get from dictionary    ${dict0}    isurl
    ${truetime}    get from dictionary    ${dict0}    truetime
    ${lastdotime}    get from dictionary    ${dict0}    lastdotime
    ${havehtml}    get from dictionary    ${dict0}    havehtml
    ${groupid}    get from dictionary    ${dict0}    groupid
    ${userfen}    get from dictionary    ${dict0}    userfen
    ${titlefont}    get from dictionary    ${dict0}    titlefont
    ${titleurl}    get from dictionary    ${dict0}    titleurl
    ${stb}    get from dictionary    ${dict0}    stb
    ${fstb}    get from dictionary    ${dict0}    fstb
    ${restb}    get from dictionary    ${dict0}    restb
    ${keyboard}    get from dictionary    ${dict0}    keyboard
    ${title}    get from dictionary    ${dict0}    title
    ${newstime}    get from dictionary    ${dict0}    newstime
    ${titlepic}    get from dictionary    ${dict0}    titlepic
    ${eckuid}    get from dictionary    ${dict0}    eckuid
    ${ftitle}    get from dictionary    ${dict0}    ftitle
    ${smalltext}    get from dictionary    ${dict0}    smalltext
    ${diggtop}    get from dictionary    ${dict0}    diggtop

获取新闻详情getNews
    Create Session    api    http://192.168.20.186:9000
    ${id}    Set Variable    789
    ${addr}    get request    api    yth-mh/news/getNews/${id}
    Should Be Equal As Strings    ${addr.status_code}    200    #判断请求响应是否为200，服务器成功返回网页
    log    ${addr.content}    #打印接口返回值
    ${responsedate}    to json    ${addr.content}    #使用to json将string转换为json串
    ${keys}    Get Dictionary Keys    ${responsedate}
    ${items}    Get Dictionary items    ${responsedate}
    ${values}    Get Dictionary values    ${responsedate}
    ${id}    get from dictionary    ${responsedate}    id
    ${classid}    get from dictionary    ${responsedate}    classid
    ${keyid}    get from dictionary    ${responsedate}    keyid
    ${dokey}    get from dictionary    ${responsedate}    dokey
    ${newstempid}    get from dictionary    ${responsedate}    newstempid
    ${closepl}    get from dictionary    ${responsedate}    closepl
    ${infotags}    get from dictionary    ${responsedate}    infotags
    ${writer}    get from dictionary    ${responsedate}    writer
    ${befrom}    get from dictionary    ${responsedate}    befrom
    ${newstext}    get from dictionary    ${responsedate}    newstext

获取生产概况指标getEom
    Create Session    api    http://192.168.20.186:9000
    ${addr}    get request    api    yth-mh/eom/getEom
    Should Be Equal As Strings    ${addr.status_code}    200    #判断请求响应是否为200，服务器成功返回网页
    log    ${addr.content}    #打印接口返回值
    ${responsedate}    to json    ${addr.content}    #使用to json将string转换为json串
    ${keys}    Get Dictionary Keys    ${responsedate}
    ${dict0}    get from list    ${responsedate}    0
    ${orgName}    get from dictionary    ${dict0}    orgName
    ${timeType}    get from dictionary    ${dict0}    timeType
    ${gdmh}    get from dictionary    ${dict0}    gdmh
    ${cydl}    get from dictionary    ${dict0}    cydl
    ${yh}    get from dictionary    ${dict0}    yh
    ${hdlyxs}    get from dictionary    ${dict0}    hdlyxs
    ${fdl}    get from dictionary    ${dict0}    fdl
    ${createTime}    get from dictionary    ${dict0}    createTime
